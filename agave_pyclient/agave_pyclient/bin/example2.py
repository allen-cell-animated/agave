from agave_pyclient import AgaveRenderer


def main():
    # r = AgaveRenderer(url="ws://localhost:1235/", mode="pathtrace")
    r = AgaveRenderer.launch_agave("D:\\agave_build\\install\\agave-install\\agave.exe")
    with r:
        r.load_data(
            "https://animatedcell-test-data.s3.us-west-2.amazonaws.com/variance/1.zarr",
            0,
            2,
            0,
            [0, 1, 2, 3, 4, 5, 6, 7, 8],
            [0, 231, 0, 156, 0, 65],
        )
        r.set_resolution(1448, 996)
        r.background_color(0, 0, 0)
        r.show_bounding_box(1)
        r.show_scale_bar(0)
        r.bounding_box_color(1, 1, 1)
        r.render_iterations(32)
        r.set_primary_ray_step_size(4)
        r.set_secondary_ray_step_size(4)
        r.set_interpolation(1)
        r.set_voxel_scale(0.433333, 0.433333, 0.29)
        r.set_flip_axis(1, 1, 1)
        r.set_clip_region(0, 1, 0, 1, 0, 1)
        r.set_clip_plane(0, 0, 0, 0)
        r.eye(0.5, 0.337662, 1.26718)
        r.target(0.5, 0.337662, 0.0941558)
        r.up(0, 1, 0)
        r.camera_projection(1, 0.5)
        r.exposure(0.75)
        r.density(100)
        r.aperture(0)
        r.focaldist(0.75)
        r.enable_channel(0, 1)
        r.mat_diffuse(0, 1, 0, 1, 1)
        r.mat_specular(0, 0, 0, 0, 0)
        r.mat_emissive(0, 0, 0, 0, 0)
        r.mat_glossiness(0, 1)
        r.mat_opacity(0, 1)
        r.set_window_level(0, 0.25, 0.1807)
        r.set_color_ramp(0, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(1, 1)
        r.mat_diffuse(1, 1, 1, 1, 1)
        r.mat_specular(1, 0, 0, 0, 0)
        r.mat_emissive(1, 0, 0, 0, 0)
        r.mat_glossiness(1, 1)
        r.mat_opacity(1, 1)
        r.set_window_level(1, 0.25, 0.2289)
        r.set_color_ramp(1, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(2, 1)
        r.mat_diffuse(2, 0, 1, 1, 1)
        r.mat_specular(2, 0, 0, 0, 0)
        r.mat_emissive(2, 0, 0, 0, 0)
        r.mat_glossiness(2, 1)
        r.mat_opacity(2, 1)
        r.set_window_level(2, 0.25, 0.2289)
        r.set_color_ramp(2, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(3, 0)
        r.mat_diffuse(3, 0.500008, 0, 0, 1)
        r.mat_specular(3, 0, 0, 0, 0)
        r.mat_emissive(3, 0, 0, 0, 0)
        r.mat_glossiness(3, 1)
        r.mat_opacity(3, 1)
        r.set_percentile_threshold(3, 0.5, 0.98)
        r.set_color_ramp(3, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(4, 0)
        r.mat_diffuse(4, 0, 0.145892, 0.500008, 1)
        r.mat_specular(4, 0, 0, 0, 0)
        r.mat_emissive(4, 0, 0, 0, 0)
        r.mat_glossiness(4, 1)
        r.mat_opacity(4, 1)
        r.set_percentile_threshold(4, 0.5, 0.98)
        r.set_color_ramp(4, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(5, 0)
        r.mat_diffuse(5, 0.291798, 0.500008, 0, 1)
        r.mat_specular(5, 0, 0, 0, 0)
        r.mat_emissive(5, 0, 0, 0, 0)
        r.mat_glossiness(5, 1)
        r.mat_opacity(5, 1)
        r.set_percentile_threshold(5, 0.5, 0.98)
        r.set_color_ramp(5, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(6, 0)
        r.mat_diffuse(6, 0.500008, 0, 0.43769, 1)
        r.mat_specular(6, 0, 0, 0, 0)
        r.mat_emissive(6, 0, 0, 0, 0)
        r.mat_glossiness(6, 1)
        r.mat_opacity(6, 1)
        r.set_percentile_threshold(6, 0.5, 0.98)
        r.set_color_ramp(6, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(7, 0)
        r.mat_diffuse(7, 0, 0.500008, 0.416403, 1)
        r.mat_specular(7, 0, 0, 0, 0)
        r.mat_emissive(7, 0, 0, 0, 0)
        r.mat_glossiness(7, 1)
        r.mat_opacity(7, 1)
        r.set_percentile_threshold(7, 0.5, 0.98)
        r.set_color_ramp(7, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.enable_channel(8, 0)
        r.mat_diffuse(8, 0.500008, 0.270512, 0, 1)
        r.mat_specular(8, 0, 0, 0, 0)
        r.mat_emissive(8, 0, 0, 0, 0)
        r.mat_glossiness(8, 1)
        r.mat_opacity(8, 1)
        r.set_percentile_threshold(8, 0.5, 0.98)
        r.set_color_ramp(8, "none", [0, 1, 1, 1, 1, 1, 1, 1, 1, 1])
        r.skylight_top_color(1, 1, 1)
        r.skylight_middle_color(1, 1, 1)
        r.skylight_bottom_color(1, 1, 1)
        r.light_pos(0, 1.5, 5.54884, 0.952752)
        r.light_color(0, 10, 10, 10)
        r.light_size(0, 0.15, 0.15)
        for i in range(1, 65):
            r.set_clip_region(0, 1, 0, 1, 0, i / 65)
            r.session(f"1_{i}.zarr.png")
            r.redraw()


if __name__ == "__main__":
    main()
